import{I as G,C as I,G as j,h as z,d as B,x as m,a as _,u as P,J as Y,z as F,w as L,M as U,m as q,W as b,b as J,V as v,U as w,c as K,k as Q,e as k,f as W,H as $,g as R,o as S,i as h,l as N,j as X,n as V,p as H,t as M,q as Z,K as E,r as ee,Q as te,v as ae,y as C,F as D,A as x}from"./eo-dash.Dw0eV_tO.js";import{e as ne,a as A}from"./VOverlay-DcHmYrZN.Bzxj31mk.js";import{A as oe,D as ie}from"./forwardRefs-Cd5sSS2x.BYlm8Oi7.js";import"./framework.BO2YHfug.js";import"./transition-DH7d6Nr9.C1Cp5hUy.js";const se=G({id:String,text:String,...I(ne({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),re=j()({name:"VTooltip",props:se(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:r}=o;const a=z(e,"modelValue"),{scopeId:c}=oe(),l=B(),s=m(()=>e.id||`v-tooltip-${l}`),n=_(),t=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),i=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),u=m(()=>e.transition?e.transition:a.value?"scale-transition":"fade-transition"),g=m(()=>k({"aria-describedby":s.value},e.activatorProps));return P(()=>{const p=A.filterProps(e);return b(A,k({ref:n,class:["v-tooltip",e.class],style:e.style,id:s.value},p,{modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,transition:u.value,absolute:!0,location:t.value,origin:i.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},c),{activator:r.activator,default:function(){var T;for(var d=arguments.length,f=new Array(d),y=0;y<d;y++)f[y]=arguments[y];return((T=r.default)==null?void 0:T.call(r,...f))??e.text}})}),ie({},n)}});function le(e,o){const r=typeof e=="string"?W(e):e,a=ue(r,o);return{mounted:a,updated:a,unmounted(c){$(null,c)}}}function ue(e,o){return function(r,a,c){var g,p,d;const l=typeof o=="function"?o(a):o,s=((g=a.value)==null?void 0:g.text)??a.value??(l==null?void 0:l.text),n=te(a.value)?a.value:{},t=()=>s??r.innerHTML,i=(c.ctx===a.instance.$?(p=ce(c,a.instance.$))==null?void 0:p.provides:(d=c.ctx)==null?void 0:d.provides)??a.instance.$.provides,u=ae(e,k(l,n),t);u.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:i}),$(u,r)}}function ce(e,o){const r=new Set,a=l=>{var s,n;for(const t of l){if(!t)continue;if(t===e)return!0;r.add(t);let i;if(t.suspense?i=a([t.ssContent]):Array.isArray(t.children)?i=a(t.children):(s=t.component)!=null&&s.vnode&&(i=a([(n=t.component)==null?void 0:n.subTree])),i)return i;r.delete(t)}return!1};if(!a([o.subTree]))throw new Error("Could not find original vnode");const c=Array.from(r).reverse();for(const l of c)if(l.component)return l.component;return o}const O=le(re,e=>{var o;return{activator:"parent",location:((o=e.arg)==null?void 0:o.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),de={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},pe=["value"],ge={class:"w-full px-4 pb-3",style:{"font-size":"12px"}},fe=["innerHTML"],xe={__name:"EodashDatePicker",props:{hintText:{type:String,default:null}},setup(e){const o=R((s,n)=>({get(){return s(),new Date(C.value).getTime()},set(t){n(),D.debug("Datepicker setting currentDate",C.value),C.value=new Date(t).toISOString()}})),r=_({input:"YYYY-MM-DD"}),a=Y([]),{selectedStac:c}=F(L());U(c,async(s,n)=>{var t;if(s&&(n==null?void 0:n.id)!==s.id){D.debug("Datepicker selected STAC change triggered");const i=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];a.splice(0,a.length);for(let u=0;u<x.length;u++){D.debug("Retrieving dates",x[u]),await x[u].fetchCollection();const g=[...new Set((t=x[u].getItems())==null?void 0:t.reduce((p,d)=>{const f=Date.parse(d.datetime);return f&&p.push(new Date(f)),p},[]))];a.push({key:"id-"+u.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:i[u%i.length]}},dates:g,content:{style:{color:"#000000","font-weight":"bold"}}})}}},{immediate:!0});function l(s){if(a.length){let n=s?1/0:-1/0;a.forEach(t=>{t!=null&&t.dates&&t.dates.forEach(i=>{i instanceof Date&&(n=Math[s?"min":"max"](n,i.getTime()))})}),o.value=n===-1/0?Date.now():n===1/0?0:n}}return(s,n)=>(S(),q(Q,null,[b(w(X),{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=t=>o.value=t),modelModifiers:{number:!0},masks:r.value,attributes:a},J({default:v(({inputValue:t,inputEvents:i})=>[h("div",de,[h("input",k({value:t},N(i,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,pe)])]),_:2},[e.hintText?{name:"footer",fn:v(()=>[h("div",ge,[h("span",{innerHTML:e.hintText},null,8,fe)])]),key:"0"}:void 0]),1032,["modelValue","masks","attributes"]),b(K,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:v(()=>[V((S(),H(E,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=t=>l(!0))},{default:v(()=>[b(M,{icon:[w(Z)]},null,8,["icon"])]),_:1})),[[O,"Set date to oldest available dataset","bottom"]]),V((S(),H(E,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=t=>l(!1))},{default:v(()=>[b(M,{icon:[w(ee)]},null,8,["icon"])]),_:1})),[[O,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{xe as default};

import{h as g,p as S,af as O,ag as j,q as R,v as $,c as F,G as h,ah as H,w as v,k as w,F as Y,K as k,ai as U,o as C,j as x,W as q,aj as P,b as A,B as G,ak as I,a0 as L}from"./framework.CxY9FQpQ.js";import{p as N,o as W,g as z,u as K,a as J,b as Q,d as X,e as Z,V as ee,f as V,l as D,_ as te,h as M,m as ae,i as _,j as ne,k as b,n as oe}from"./eo-dash.BIm2sYY-.js";import{m as se,V as B}from"./VOverlay-CWQBQEay.CYxasdfQ.js";import{u as re,f as ie}from"./forwardRefs-BkGHRdGg.WMpafBqK.js";import"./commonjsHelpers.Cpj98o6Y.js";import"./theme.YAEQg5us.js";import"./transition-BVzHCiEq.X3mmN-x7.js";const le=N({id:String,text:String,...W(se({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),ce=z()({name:"VTooltip",props:le(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:r}=o;const a=K(e,"modelValue"),{scopeId:u}=re(),i=J(),d=g(()=>e.id||`v-tooltip-${i}`),s=S(),t=g(()=>e.location.split(" ").length>1?e.location:e.location+" center"),n=g(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),c=g(()=>e.transition?e.transition:a.value?"scale-transition":"fade-transition"),l=g(()=>k({"aria-describedby":d.value},e.activatorProps));return Q(()=>{const p=B.filterProps(e);return h(B,k({ref:s,class:["v-tooltip",e.class],style:e.style,id:d.value},p,{modelValue:a.value,"onUpdate:modelValue":f=>a.value=f,transition:c.value,absolute:!0,location:t.value,origin:n.value,persistent:!0,role:"tooltip",activatorProps:l.value,_disableGlobalStack:!0},u),{activator:r.activator,default:function(){var T;for(var f=arguments.length,y=new Array(f),m=0;m<f;m++)y[m]=arguments[m];return((T=r.default)==null?void 0:T.call(r,...y))??e.text}})}),ie({},s)}});function ue(e,o){const r=typeof e=="string"?G(e):e,a=de(r,o);return{mounted:a,updated:a,unmounted(u){I(null,u)}}}function de(e,o){return function(r,a,u){var l,p,f;const i=typeof o=="function"?o(a):o,d=((l=a.value)==null?void 0:l.text)??a.value??(i==null?void 0:i.text),s=oe(a.value)?a.value:{},t=()=>d??r.textContent,n=(u.ctx===a.instance.$?(p=fe(u,a.instance.$))==null?void 0:p.provides:(f=u.ctx)==null?void 0:f.provides)??a.instance.$.provides,c=L(e,k(i,s),t);c.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:n}),I(c,r)}}function fe(e,o){const r=new Set,a=i=>{var d,s;for(const t of i){if(!t)continue;if(t===e||t.el&&e.el&&t.el===e.el)return!0;r.add(t);let n;if(t.suspense?n=a([t.ssContent]):Array.isArray(t.children)?n=a(t.children):(d=t.component)!=null&&d.vnode&&(n=a([(s=t.component)==null?void 0:s.subTree])),n)return n;r.delete(t)}return!1};if(!a([o.subTree]))return o;const u=Array.from(r).reverse();for(const i of u)if(i.component)return i.component;return o}const E=ue(ce,e=>{var o;return{activator:"parent",location:(o=e.arg)==null?void 0:o.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value}}),me={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},pe=["value"],ge={class:"w-full px-4 pb-3",style:{"font-size":"12px"}},ve=["innerHTML"],Ve={__name:"EodashDatePicker",props:{hintText:{type:String,default:null}},setup(e){U(s=>({cd569fa8:d.value}));const o=O((s,t)=>({get(){return s(),new Date(V.value).getTime()},set(n){t(),D.debug("Datepicker setting currentDate",V.value),V.value=new Date(n).toISOString()}})),r=S({input:"YYYY-MM-DD"}),a=j([]),{selectedStac:u}=X(Z());R(u,async(s,t)=>{var n;if(s&&(t==null?void 0:t.id)!==s.id){D.debug("Datepicker selected STAC change triggered");const c=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];a.splice(0,a.length);for(let l=0;l<b.length;l++){D.debug("Retrieving dates",b[l]),await b[l].fetchCollection();const p=[...new Set((n=b[l].getItems())==null?void 0:n.reduce((f,y)=>{const m=Date.parse(y.datetime);return m&&f.push(new Date(m)),f},[]))];a.push({key:"id-"+l.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:c[l%c.length]}},dates:p,content:{style:{color:"#000000","font-weight":"bold"}}})}}},{immediate:!0});function i(s){if(a.length){let t=s?1/0:-1/0;a.forEach(n=>{n!=null&&n.dates&&n.dates.forEach(c=>{c instanceof Date&&(t=Math[s?"min":"max"](t,c.getTime()))})}),o.value=t===-1/0?Date.now():t===1/0?0:t}}const d=S("");return $(()=>{d.value=document.querySelector("eo-dash")?"translate3d(50px,-80px,0)":"translate3d(0px,-80px,0)"}),(s,t)=>(C(),F(Y,null,[h(w(te),{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=n=>o.value=n),modelModifiers:{number:!0},masks:r.value,attributes:a},H({default:v(({inputValue:n,inputEvents:c})=>[x("div",me,[x("input",k({value:n},q(c,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,pe)])]),_:2},[e.hintText?{name:"footer",fn:v(()=>[x("div",ge,[x("span",{innerHTML:e.hintText},null,8,ve)])]),key:"0"}:void 0]),1032,["modelValue","masks","attributes"]),h(ee,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:v(()=>[P((C(),A(_,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:t[1]||(t[1]=n=>i(!0))},{default:v(()=>[h(M,{icon:[w(ae)]},null,8,["icon"])]),_:1})),[[E,"Set date to oldest available dataset","bottom"]]),P((C(),A(_,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:t[2]||(t[2]=n=>i(!1))},{default:v(()=>[h(M,{icon:[w(ne)]},null,8,["icon"])]),_:1})),[[E,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{Ve as default};

import{N as P,_ as Y,F as j,U as B,H as I,E as m,l as k,Z as q,R as F,o as H,x as J,q as N,C as U,c as z,L as v,k as b,a as h,b as M,O as W,s as x,d as Z,i as A,e as D,f as C,J as L,g as Q,Q as E,h as T,j as O,Y as R,z as V,B as G,n as K,p as X,W as ee,D as y,r as te}from"./eo-dash.CmjykwYQ.js";import{f as ae,P as ne}from"./helpers-Fn8MhO35.QDMVjx_i.js";import{J as oe,o as _}from"./VOverlay-C_N9aNKh.oDgXkEGl.js";import{A as ie,D as se}from"./forwardRefs-DN0yDi_B.BMapOZUL.js";import"./framework.DTpfHoR8.js";import"./commonjsHelpers-DaMA6jEr.DwXtFsJ3.js";import"./transition-5mZQiWmF.t0wHEDGd.js";const le=P({id:String,text:String,...Y(oe({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),re=j()({name:"VTooltip",props:le(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:l}=s;const a=B(e,"modelValue"),{scopeId:r}=ie(),u=I(),o=m(()=>e.id||`v-tooltip-${u}`),n=k(),t=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),i=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=m(()=>e.transition?e.transition:a.value?"scale-transition":"fade-transition"),d=m(()=>x({"aria-describedby":o.value},e.activatorProps));return q(()=>{const f=_.filterProps(e);return v(_,x({ref:n,class:["v-tooltip",e.class],style:e.style,id:o.value},f,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,transition:p.value,absolute:!0,location:t.value,origin:i.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},r),{activator:l.activator,default:function(){var S;for(var c=arguments.length,w=new Array(c),g=0;g<c;g++)w[g]=arguments[g];return((S=l.default)==null?void 0:S.call(l,...w))??e.text}})}),se({},n)}});function ue(e,s){const l=typeof e=="string"?Z(e):e,a=ce(l,s);return{mounted:a,updated:a,unmounted(r){A(null,r)}}}function ce(e,s){return function(l,a,r){var d,f,c;const u=typeof s=="function"?s(a):s,o=((d=a.value)==null?void 0:d.text)??a.value??(u==null?void 0:u.text),n=K(a.value)?a.value:{},t=()=>o??l.innerHTML,i=(r.ctx===a.instance.$?(f=de(r,a.instance.$))==null?void 0:f.provides:(c=r.ctx)==null?void 0:c.provides)??a.instance.$.provides,p=X(e,x(u,n),t);p.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:i}),A(p,l)}}function de(e,s){const l=new Set,a=u=>{var o,n;for(const t of u){if(!t)continue;if(t===e)return!0;l.add(t);let i;if(t.suspense?i=a([t.ssContent]):Array.isArray(t.children)?i=a(t.children):(o=t.component)!=null&&o.vnode&&(i=a([(n=t.component)==null?void 0:n.subTree])),i)return i;l.delete(t)}return!1};if(!a([s.subTree]))throw new Error("Could not find original vnode");const r=Array.from(l).reverse();for(const u of r)if(u.component)return u.component;return s}const $=ue(re,e=>{var s;return{activator:"parent",location:((s=e.arg)==null?void 0:s.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),pe={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},fe=["value"],De={__name:"EodashDatePicker",setup(e){function s(o){if(r.value&&r.value.length>0){let n=o?1/0:-1/0;r.value.forEach(t=>{t!=null&&t.dates&&t.dates.forEach(i=>{i instanceof Date&&(!o&&i.getTime()>n||o&&i.getTime()<n)&&(n=i.getTime())})}),n!==0&&(u.value=new Date(n))}}const l=F(ee),a=k({input:"YYYY-MM-DD"}),r=k([]),u=m({get(){return y.value?new Date(y.value):new Date},set(o){o instanceof Date&&!isNaN(o.getTime())?y.value=new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString():y.value=new Date().toISOString()}});return H(()=>{const{selectedStac:o}=J(N());U([o],async([n])=>{if(n){const t=ae(`./${n.id}/collection.json`,l.stacEndpoint),i=ne(o.value,t),p=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];for(let d=0;d<i.length;d++){const f=(await te.get(i[d]).then(c=>c.data)).links.filter(c=>c.rel==="item"&&"datetime"in c).map(c=>new Date(c.datetime));r.value=[{bar:{style:{backgroundColor:p[d%p.length]}},dates:f}]}}},{immediate:!0})}),(o,n)=>(D(),z(W,null,[v(h(Q),{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t),masks:a.value,attributes:r.value},{default:b(({inputValue:t,inputEvents:i})=>[C("div",pe,[C("input",x({value:t},L(i,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,fe)])]),_:1},8,["modelValue","masks","attributes"]),v(M,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:b(()=>[E((D(),T(V,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=t=>s(!0))},{default:b(()=>[v(O,{icon:[h(R)]},null,8,["icon"])]),_:1})),[[$,"Set date to oldest available dataset","bottom"]]),E((D(),T(V,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=t=>s(!1))},{default:b(()=>[v(O,{icon:[h(G)]},null,8,["icon"])]),_:1})),[[$,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{De as default};

import{N as j,y as P,F as B,H as F,B as I,E as m,l as S,Z as G,R as H,o as N,T as U,G as Y,C as Z,c as M,L as v,k as y,I as h,a as W,O as J,s as x,b as L,d as _,e as k,f as D,g as R,i as X,X as C,j as E,m as O,n as q,U as V,p as z,q as K,r as Q,W as ee,t as b,u as te}from"./eo-dash.Bj-BwD49.js";import{f as ae,P as ne}from"./helpers-YReyjCrq.UzcSDL4p.js";import{J as oe,o as $}from"./VOverlay-DSKJ59wU.P3Enbd_R.js";import{A as ie,D as se}from"./forwardRefs-CnNpvtjx.aF_KOwox.js";import"./framework.DTpfHoR8.js";import"./commonjsHelpers-DaMA6jEr.DwXtFsJ3.js";import"./transition-xY_ohvKN.CUpvwRYc.js";const le=j({id:String,text:String,...P(oe({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),re=B()({name:"VTooltip",props:le(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:l}=s;const a=F(e,"modelValue"),{scopeId:r}=ie(),u=I(),o=m(()=>e.id||`v-tooltip-${u}`),n=S(),t=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),i=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=m(()=>e.transition?e.transition:a.value?"scale-transition":"fade-transition"),d=m(()=>x({"aria-describedby":o.value},e.activatorProps));return G(()=>{const f=$.filterProps(e);return v($,x({ref:n,class:["v-tooltip",e.class],style:e.style,id:o.value},f,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,transition:p.value,absolute:!0,location:t.value,origin:i.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},r),{activator:l.activator,default:function(){var w;for(var c=arguments.length,T=new Array(c),g=0;g<c;g++)T[g]=arguments[g];return((w=l.default)==null?void 0:w.call(l,...T))??e.text}})}),se({},n)}});function ue(e,s){const l=typeof e=="string"?L(e):e,a=ce(l,s);return{mounted:a,updated:a,unmounted(r){_(null,r)}}}function ce(e,s){return function(l,a,r){var d,f,c;const u=typeof s=="function"?s(a):s,o=((d=a.value)==null?void 0:d.text)??a.value??(u==null?void 0:u.text),n=K(a.value)?a.value:{},t=()=>o??l.innerHTML,i=(r.ctx===a.instance.$?(f=de(r,a.instance.$))==null?void 0:f.provides:(c=r.ctx)==null?void 0:c.provides)??a.instance.$.provides,p=Q(e,x(u,n),t);p.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:i}),_(p,l)}}function de(e,s){const l=new Set,a=u=>{var o,n;for(const t of u){if(!t)continue;if(t===e)return!0;l.add(t);let i;if(t.suspense?i=a([t.ssContent]):Array.isArray(t.children)?i=a(t.children):(o=t.component)!=null&&o.vnode&&(i=a([(n=t.component)==null?void 0:n.subTree])),i)return i;l.delete(t)}return!1};if(!a([s.subTree]))throw new Error("Could not find original vnode");const r=Array.from(l).reverse();for(const u of r)if(u.component)return u.component;return s}const A=ue(re,e=>{var s;return{activator:"parent",location:((s=e.arg)==null?void 0:s.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),pe={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},fe=["value"],ke={__name:"EodashDatePicker",setup(e){function s(o){if(r.value&&r.value.length>0){let n=o?1/0:-1/0;r.value.forEach(t=>{t!=null&&t.dates&&t.dates.forEach(i=>{i instanceof Date&&(!o&&i.getTime()>n||o&&i.getTime()<n)&&(n=i.getTime())})}),n!==0&&(u.value=new Date(n))}}const l=H(ee),a=S({input:"YYYY-MM-DD"}),r=S([]),u=m({get(){return b.value?new Date(b.value):new Date},set(o){o instanceof Date&&!isNaN(o.getTime())?b.value=new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString():b.value=new Date().toISOString()}});return N(()=>{const{selectedStac:o}=U(Y());Z([o],async([n])=>{if(n){const t=ae(`./${n.id}/collection.json`,l.stacEndpoint),i=ne(o.value,t),p=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];for(let d=0;d<i.length;d++){const f=(await te.get(i[d]).then(c=>c.data)).links.filter(c=>c.rel==="item"&&"datetime"in c).map(c=>new Date(c.datetime));r.value=[{bar:{style:{backgroundColor:p[d%p.length]}},dates:f}]}}},{immediate:!0})}),(o,n)=>(k(),M(J,null,[v(h(X),{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t),masks:a.value,attributes:r.value},{default:y(({inputValue:t,inputEvents:i})=>[D("div",pe,[D("input",x({value:t},R(i,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,fe)])]),_:1},8,["modelValue","masks","attributes"]),v(W,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:y(()=>[C((k(),E(V,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=t=>s(!0))},{default:y(()=>[v(O,{icon:[h(q)]},null,8,["icon"])]),_:1})),[[A,"Set date to oldest available dataset","bottom"]]),C((k(),E(V,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=t=>s(!1))},{default:y(()=>[v(O,{icon:[h(z)]},null,8,["icon"])]),_:1})),[[A,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{ke as default};

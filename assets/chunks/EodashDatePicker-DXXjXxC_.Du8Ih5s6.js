import{N as j,g as I,F as Y,Y as F,j as N,E as f,u as k,Z as H,R as P,o as Z,a as z,z as B,C as G,c as K,L as m,k as b,I as h,b as M,O as R,s as x,e as W,n as _,f as w,h as D,G as J,r as L,i as E,l as T,m as O,p as U,H as V,q,v as Q,K as X,W as ee,t as y}from"./eo-dash.Ber0M2jt.js";import{v as te,I as ae}from"./helpers-Cd5gx56l.C41MaQGw.js";import{J as ne,o as $}from"./VOverlay-Bz5dOCtz.iXFUbt7L.js";import{A as oe,D as ie}from"./forwardRefs-DLBUFqjG.D69BxolQ.js";import"./framework.DTpfHoR8.js";import"./commonjsHelpers-DaMA6jEr.DwXtFsJ3.js";import"./transition-UP98pXdu.4xszQkX1.js";const se=j({id:String,text:String,...I(ne({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),re=Y()({name:"VTooltip",props:se(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:r}=s;const a=F(e,"modelValue"),{scopeId:l}=oe(),u=N(),o=f(()=>e.id||`v-tooltip-${u}`),n=k(),t=f(()=>e.location.split(" ").length>1?e.location:e.location+" center"),i=f(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=f(()=>e.transition?e.transition:a.value?"scale-transition":"fade-transition"),d=f(()=>x({"aria-describedby":o.value},e.activatorProps));return H(()=>{const v=$.filterProps(e);return m($,x({ref:n,class:["v-tooltip",e.class],style:e.style,id:o.value},v,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,transition:p.value,absolute:!0,location:t.value,origin:i.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},l),{activator:r.activator,default:function(){var C;for(var c=arguments.length,S=new Array(c),g=0;g<c;g++)S[g]=arguments[g];return((C=r.default)==null?void 0:C.call(r,...S))??e.text}})}),ie({},n)}});function le(e,s){const r=typeof e=="string"?W(e):e,a=ue(r,s);return{mounted:a,updated:a,unmounted(l){_(null,l)}}}function ue(e,s){return function(r,a,l){var d,v,c;const u=typeof s=="function"?s(a):s,o=((d=a.value)==null?void 0:d.text)??a.value??(u==null?void 0:u.text),n=Q(a.value)?a.value:{},t=()=>o??r.innerHTML,i=(l.ctx===a.instance.$?(v=ce(l,a.instance.$))==null?void 0:v.provides:(c=l.ctx)==null?void 0:c.provides)??a.instance.$.provides,p=X(e,x(u,n),t);p.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:i}),_(p,r)}}function ce(e,s){const r=new Set,a=u=>{var o,n;for(const t of u){if(!t)continue;if(t===e)return!0;r.add(t);let i;if(t.suspense?i=a([t.ssContent]):Array.isArray(t.children)?i=a(t.children):(o=t.component)!=null&&o.vnode&&(i=a([(n=t.component)==null?void 0:n.subTree])),i)return i;r.delete(t)}return!1};if(!a([s.subTree]))throw new Error("Could not find original vnode");const l=Array.from(r).reverse();for(const u of l)if(u.component)return u.component;return s}const A=le(re,e=>{var s;return{activator:"parent",location:((s=e.arg)==null?void 0:s.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),de={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},pe=["value"],he={__name:"EodashDatePicker",setup(e){function s(o){if(l.value&&l.value.length>0){let n=o?1/0:-1/0;l.value.forEach(t=>{t!=null&&t.dates&&t.dates.forEach(i=>{i instanceof Date&&(!o&&i.getTime()>n||o&&i.getTime()<n)&&(n=i.getTime())})}),n!==0&&(u.value=new Date(n))}}const r=P(ee),a=k({input:"YYYY-MM-DD"}),l=k([]),u=f({get(){return y.value?new Date(y.value):new Date},set(o){o instanceof Date&&!isNaN(o.getTime())?y.value=new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString():y.value=new Date().toISOString()}});return Z(()=>{const{selectedStac:o}=z(B());G([o],async([n])=>{if(n){const t=te(`./${n.id}/collection.json`,r.stacEndpoint),i=ae(o.value,t),p=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];for(let d=0;d<i.length;d++){const v=(await(await fetch(i[d])).json()).links.filter(c=>c.rel==="item"&&"datetime"in c).map(c=>new Date(c.datetime));l.value=[{bar:{style:{backgroundColor:p[d%p.length]}},dates:v}]}}},{immediate:!0})}),(o,n)=>(w(),K(R,null,[m(h(L),{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t),masks:a.value,attributes:l.value},{default:b(({inputValue:t,inputEvents:i})=>[D("div",de,[D("input",x({value:t},J(i,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,pe)])]),_:1},8,["modelValue","masks","attributes"]),m(M,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:b(()=>[E((w(),T(V,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=t=>s(!0))},{default:b(()=>[m(O,{icon:[h(U)]},null,8,["icon"])]),_:1})),[[A,"Set date to oldest available dataset","bottom"]]),E((w(),T(V,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=t=>s(!1))},{default:b(()=>[m(O,{icon:[h(q)]},null,8,["icon"])]),_:1})),[[A,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{he as default};

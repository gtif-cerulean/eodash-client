import{M as A,I,Y as P,a as B,b as j,C as m,f as Y,r as H,J as L,l as U,t as W,p as F,P as J,m as N,U as f,L as b,c as S,D as Q,x as q,u as x,V as z,d as $,s as D,O as k,e as G,g as K,S as V,W as C,h as O,n as R,o as T,j as X,k as Z,q as ee,F as h,v as E}from"./eo-dash.DmlGEMRm.js";import{Q as te,o as _}from"./VOverlay-DdBHvqfJ.Cr7k1We9.js";import{A as ae,D as ne}from"./forwardRefs-8DgAZeLM.1uWKteWk.js";import"./framework.D7uhl4cx.js";import"./transition-DWlqp9xA.BxY_slGY.js";const oe=A({id:String,text:String,...I(te({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),se=P()({name:"VTooltip",props:oe(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:r}=i;const t=B(e,"modelValue"),{scopeId:l}=ae(),o=j(),a=m(()=>e.id||`v-tooltip-${o}`),s=Y(),n=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),u=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),g=m(()=>e.transition?e.transition:t.value?"scale-transition":"fade-transition"),d=m(()=>x({"aria-describedby":a.value},e.activatorProps));return H(()=>{const c=_.filterProps(e);return f(_,x({ref:s,class:["v-tooltip",e.class],style:e.style,id:a.value},c,{modelValue:t.value,"onUpdate:modelValue":p=>t.value=p,transition:g.value,absolute:!0,location:n.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},l),{activator:r.activator,default:function(){var w;for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return((w=r.default)==null?void 0:w.call(r,...v))??e.text}})}),ne({},s)}});function ie(e,i){const r=typeof e=="string"?z(e):e,t=re(r,i);return{mounted:t,updated:t,unmounted(l){$(null,l)}}}function re(e,i){return function(r,t,l){var d,c,p;const o=typeof i=="function"?i(t):i,a=((d=t.value)==null?void 0:d.text)??t.value??(o==null?void 0:o.text),s=Z(t.value)?t.value:{},n=()=>a??r.innerHTML,u=(l.ctx===t.instance.$?(c=le(l,t.instance.$))==null?void 0:c.provides:(p=l.ctx)==null?void 0:p.provides)??t.instance.$.provides,g=ee(e,x(o,s),n);g.appContext=Object.assign(Object.create(null),t.instance.$.appContext,{provides:u}),$(g,r)}}function le(e,i){const r=new Set,t=o=>{var a,s;for(const n of o){if(!n)continue;if(n===e)return!0;r.add(n);let u;if(n.suspense?u=t([n.ssContent]):Array.isArray(n.children)?u=t(n.children):(a=n.component)!=null&&a.vnode&&(u=t([(s=n.component)==null?void 0:s.subTree])),u)return u;r.delete(n)}return!1};if(!t([i.subTree]))throw new Error("Could not find original vnode");const l=Array.from(r).reverse();for(const o of l)if(o.component)return o.component;return i}const M=ie(se,e=>{var i;return{activator:"parent",location:((i=e.arg)==null?void 0:i.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),ue={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},ce=["value"],ve={__name:"EodashDatePicker",setup(e){function i(o){if(t.length){let a=o?1/0:-1/0;t.forEach(s=>{s!=null&&s.dates&&s.dates.forEach(n=>{n instanceof Date&&(!o&&n.getTime()>a||o&&n.getTime()<a)&&(a=n.getTime())})}),a!==0&&(l.value=new Date(a))}}const r=Y({input:"YYYY-MM-DD"}),t=L([]),l=m({get(){return h.value?new Date(h.value):new Date},set(o){o instanceof Date&&!isNaN(o.getTime())?h.value=new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString():h.value=new Date().toISOString()}});return U(()=>{const{selectedStac:o}=W(F());J([o],async([a])=>{var s,n,u;if(a){const g=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];t.length=0;for(let c=0;c<E.length;c++){const p=[...new Set((s=E[c].getItems())==null?void 0:s.map(v=>new Date(v.datetime)))];t.push({key:"id-"+c.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:g[c%g.length]}},dates:p})}const d=(u=(n=a==null?void 0:a.extent)==null?void 0:n.temporal)==null?void 0:u.interval;d&&d.length>0&&d[0].length>1&&(l.value=new Date(d[0][1]))}},{immediate:!0})}),(o,a)=>(D(),N(q,null,[f(S(K),{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s),masks:r.value,attributes:t},{default:b(({inputValue:s,inputEvents:n})=>[k("div",ue,[k("input",x({value:s},G(n,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,ce)])]),_:1},8,["modelValue","masks","attributes"]),f(Q,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:b(()=>[V((D(),C(T,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:a[1]||(a[1]=s=>i(!0))},{default:b(()=>[f(O,{icon:[S(R)]},null,8,["icon"])]),_:1})),[[M,"Set date to oldest available dataset","bottom"]]),V((D(),C(T,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:a[2]||(a[2]=s=>i(!1))},{default:b(()=>[f(O,{icon:[S(X)]},null,8,["icon"])]),_:1})),[[M,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{ve as default};

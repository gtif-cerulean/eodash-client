import{N as A,u as B,V as j,B as I,Y as N,E as f,a as k,J as z,b as P,o as F,y as M,z as Z,C as q,c as H,L as v,k as y,I as h,Q as J,O as L,s as x,d as Q,e as $,Z as w,_ as S,f as U,q as X,X as V,F as C,T as E,g as G,h as O,i as W,j as K,l as R,m as ee,n as b}from"./eo-dash.Dm96hStJ.js";import{m as te,Y as ae}from"./eodashSTAC-CFQuZ_cI.CXssRn8V.js";import{e as ne,a as Y}from"./VOverlay-D_MKJ4vQ.DD2Z08As.js";import{A as oe,D as ie}from"./forwardRefs-D0a135Tc.Bptz1fEX.js";import"./framework.CXycA2KK.js";import"./commonjsHelpers-DaMA6jEr.DwXtFsJ3.js";import"./transition-C8le0YwQ.CatZIafW.js";const se=A({id:String,text:String,...B(ne({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),le=j()({name:"VTooltip",props:se(),emits:{"update:modelValue":e=>!0},setup(e,s){let{slots:l}=s;const a=I(e,"modelValue"),{scopeId:r}=oe(),u=N(),o=f(()=>e.id||`v-tooltip-${u}`),n=k(),t=f(()=>e.location.split(" ").length>1?e.location:e.location+" center"),i=f(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=f(()=>e.transition?e.transition:a.value?"scale-transition":"fade-transition"),d=f(()=>x({"aria-describedby":o.value},e.activatorProps));return z(()=>{const m=Y.filterProps(e);return v(Y,x({ref:n,class:["v-tooltip",e.class],style:e.style,id:o.value},m,{modelValue:a.value,"onUpdate:modelValue":c=>a.value=c,transition:p.value,absolute:!0,location:t.value,origin:i.value,persistent:!0,role:"tooltip",activatorProps:d.value,_disableGlobalStack:!0},r),{activator:l.activator,default:function(){var D;for(var c=arguments.length,T=new Array(c),g=0;g<c;g++)T[g]=arguments[g];return((D=l.default)==null?void 0:D.call(l,...T))??e.text}})}),ie({},n)}});function re(e,s){const l=typeof e=="string"?Q(e):e,a=ue(l,s);return{mounted:a,updated:a,unmounted(r){$(null,r)}}}function ue(e,s){return function(l,a,r){var d,m,c;const u=typeof s=="function"?s(a):s,o=((d=a.value)==null?void 0:d.text)??a.value??(u==null?void 0:u.text),n=K(a.value)?a.value:{},t=()=>o??l.innerHTML,i=(r.ctx===a.instance.$?(m=ce(r,a.instance.$))==null?void 0:m.provides:(c=r.ctx)==null?void 0:c.provides)??a.instance.$.provides,p=R(e,x(u,n),t);p.appContext=Object.assign(Object.create(null),a.instance.$.appContext,{provides:i}),$(p,l)}}function ce(e,s){const l=new Set,a=u=>{var o,n;for(const t of u){if(!t)continue;if(t===e)return!0;l.add(t);let i;if(t.suspense?i=a([t.ssContent]):Array.isArray(t.children)?i=a(t.children):(o=t.component)!=null&&o.vnode&&(i=a([(n=t.component)==null?void 0:n.subTree])),i)return i;l.delete(t)}return!1};if(!a([s.subTree]))throw new Error("Could not find original vnode");const r=Array.from(l).reverse();for(const u of r)if(u.component)return u.component;return s}const _=re(le,e=>{var s;return{activator:"parent",location:((s=e.arg)==null?void 0:s.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),de={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},pe=["value"],he={__name:"EodashDatePicker",setup(e){function s(o){if(r.value&&r.value.length>0){let n=o?1/0:-1/0;r.value.forEach(t=>{t!=null&&t.dates&&t.dates.forEach(i=>{i instanceof Date&&(!o&&i.getTime()>n||o&&i.getTime()<n)&&(n=i.getTime())})}),n!==0&&(u.value=new Date(n))}}const l=P(ee),a=k({input:"YYYY-MM-DD"}),r=k([]),u=f({get(){return b.value?new Date(b.value):new Date},set(o){o instanceof Date&&!isNaN(o.getTime())?b.value=new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString():b.value=new Date().toISOString()}});return F(()=>{const{selectedStac:o}=M(Z());q([o],async([n])=>{if(n){const t=te(`./${n.id}/collection.json`,l.stacEndpoint),i=ae(o.value,t),p=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];for(let d=0;d<i.length;d++){const m=(await(await fetch(i[d])).json()).links.filter(c=>c.rel==="item"&&"datetime"in c).map(c=>new Date(c.datetime));r.value=[{bar:{style:{backgroundColor:p[d%p.length]}},dates:m}]}}},{immediate:!0})}),(o,n)=>(w(),H(L,null,[v(h(X),{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t),masks:a.value,attributes:r.value},{default:y(({inputValue:t,inputEvents:i})=>[S("div",de,[S("input",x({value:t},U(i,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,pe)])]),_:1},8,["modelValue","masks","attributes"]),v(J,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:y(()=>[V((w(),C(O,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=t=>s(!0))},{default:y(()=>[v(E,{icon:[h(G)]},null,8,["icon"])]),_:1})),[[_,"Set date to oldest available dataset","bottom"]]),V((w(),C(O,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=t=>s(!1))},{default:y(()=>[v(E,{icon:[h(W)]},null,8,["icon"])]),_:1})),[[_,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{he as default};
